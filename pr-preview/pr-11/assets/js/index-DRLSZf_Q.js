import{r as i,E as rt,j as e,F as lt}from"./react-vendor-C4ZO8IY6.js";import{E as it}from"./vendor-B0MrLUck.js";import{n as ct,c as ot,a as dt,b as mt,g as ut}from"./algorithms-CjWtMv8a.js";import{C as ee,a as Se,c as te,S as Ie,h as ze,i as Oe,j as $e,k as Y,A as Ye,e as We,f as Xe,g as Ge,M as Te,B as le,l as ht,P as xt}from"./ui-components-D8XMkgzH.js";import{A as gt,N as pt,H as ft,G as bt,T as vt,F as jt,a as yt}from"./content-B4UqHgOO.js";import"./ui-vendor-e1yigncZ.js";(function(){if(typeof window>"u")return;const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))I(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const S of c.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&I(S)}).observe(document,{childList:!0,subtree:!0});function C(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function I(a){if(a.ep)return;a.ep=!0;const c=C(a);fetch(a.href,c)}})();function Nt(D={}){const{minScale:A=.5,maxScale:C=4,enablePan:I=!0,enableZoom:a=!0,resetOnDoubleClick:c=!0}=D,S=i.useRef(null),[f,se]=i.useState({scale:1,translateX:0,translateY:0}),M=i.useRef([]),z=i.useRef(0),R=i.useRef(!1),g=i.useRef(!1),ne=i.useRef(void 0),F=i.useRef(void 0),d=i.useCallback((r,o)=>{const m=r.clientX-o.clientX,w=r.clientY-o.clientY;return Math.sqrt(m*m+w*w)},[]),l=i.useCallback((r,o)=>({x:(r.clientX+o.clientX)/2,y:(r.clientY+o.clientY)/2}),[]),L=i.useCallback(r=>Math.max(A,Math.min(C,r)),[A,C]),ae=i.useCallback((r,o,m)=>{if(!S.current)return{x:r,y:o};const v=S.current.getBoundingClientRect(),X=v.width*m,G=v.height*m,$=Math.max(0,(X-v.width)/2),V=Math.max(0,(G-v.height)/2);return{x:Math.max(-$,Math.min($,r)),y:Math.max(-V,Math.min(V,o))}},[]),k=i.useCallback(r=>{se(o=>{const m={...o,...r};m.scale=L(m.scale);const w=ae(m.translateX,m.translateY,m.scale);return m.translateX=w.x,m.translateY=w.y,m})},[L,ae]),W=i.useCallback(r=>{r.cancelable&&r.preventDefault();const o=Array.from(r.touches);M.current=o,o.length===1?(R.current=!0,g.current=!1):o.length===2&&a&&(R.current=!1,g.current=!0,z.current=d(o[0],o[1]));const m=r.currentTarget;m.style.filter="brightness(0.95)",F.current&&clearTimeout(F.current)},[a,d]),ie=i.useCallback(r=>{r.cancelable&&r.preventDefault();const o=Array.from(r.touches),m=M.current;if(o.length===1&&m.length===1&&I&&R.current){const w=o[0],v=m[0],X=w.clientX-v.clientX,G=w.clientY-v.clientY;k({translateX:f.translateX+X,translateY:f.translateY+G})}else if(o.length===2&&m.length===2&&a&&g.current){const w=d(o[0],o[1]),v=z.current;if(v>0){const X=w/v,G=f.scale*X,$=l(o[0],o[1]),J=r.currentTarget.getBoundingClientRect(),we=$.x-J.left-J.width/2,Pe=$.y-J.top-J.height/2,ge=G-f.scale,Ce=f.translateX-we*ge/f.scale,De=f.translateY-Pe*ge/f.scale;k({scale:G,translateX:Ce,translateY:De})}z.current=w}M.current=o},[I,a,R,g,f,d,l,k]),me=i.useCallback(r=>{r.cancelable&&r.preventDefault();const o=Array.from(r.touches);M.current=o,o.length===0?(R.current=!1,g.current=!1,z.current=0,M.current=[]):o.length===1&&(R.current=!0,g.current=!1,z.current=0);const m=r.currentTarget;m.style.filter="brightness(1)",m.style.transform="scale(1)",F.current&&(clearTimeout(F.current),F.current=void 0)},[]),ue=i.useCallback(r=>{if(!a)return;r.cancelable&&r.preventDefault();const o=r.deltaY>0?.9:1.1,m=f.scale*o,v=r.currentTarget.getBoundingClientRect(),X=r.clientX-v.left-v.width/2,G=r.clientY-v.top-v.height/2,$=m-f.scale,V=f.translateX-X*$/f.scale,J=f.translateY-G*$/f.scale;k({scale:m,translateX:V,translateY:J})},[a,f,k]),he=i.useCallback(r=>{c&&(r.preventDefault(),k({scale:1,translateX:0,translateY:0}))},[c,k]),ke=i.useCallback(()=>{k({scale:1,translateX:0,translateY:0})},[k]),xe=i.useCallback(r=>{k(r)},[k]);return i.useEffect(()=>{if(!S.current)return;const r=S.current,{scale:o,translateX:m,translateY:w}=f;r.style.transform=`translate3d(${m}px, ${w}px, 0) scale(${o})`,r.style.transformOrigin="center center",r.style.transition=R.current||g.current?"none":"transform 0.1s ease-out"},[f]),i.useEffect(()=>{const r=S.current;if(!r)return;const o=v=>{v.preventDefault()},m=v=>{v.preventDefault()},w=v=>{v.preventDefault()};return r.addEventListener("touchstart",o,{passive:!1}),r.addEventListener("touchmove",m,{passive:!1}),r.addEventListener("touchend",w,{passive:!1}),()=>{r.removeEventListener("touchstart",o),r.removeEventListener("touchmove",m),r.removeEventListener("touchend",w)}},[]),i.useEffect(()=>{const r={animationFrame:ne,visualFeedbackTimeout:F,lastTouches:M,lastDistance:z,isPanning:R,isZooming:g};return()=>{r.animationFrame.current&&cancelAnimationFrame(r.animationFrame.current),r.visualFeedbackTimeout.current&&clearTimeout(r.visualFeedbackTimeout.current),r.lastTouches.current=[],r.lastDistance.current=0,r.isPanning.current=!1,r.isZooming.current=!1}},[]),[S,f,{onTouchStart:W,onTouchMove:ie,onTouchEnd:me,onWheel:ue,onDoubleClick:he,resetTransform:ke,setTransform:xe}]}const Tt=({onChange:D,hoopDiameterMM:A,imgSizePx:C,initialSpec:I,disabled:a=!1})=>{const[c,S]=i.useState(I||{type:"tex",material:"polyester",tex:30,k:1.1}),f=ct(c),se=ot(c),M=dt(c),z=mt(M,A,C),R=rt.useRef(D);i.useEffect(()=>{R.current=D},[D]),i.useEffect(()=>{R.current(c,z)},[c,z]);const g=l=>{S(L=>({...L,...l}))},ne=l=>{g({type:l})},F=l=>{g({material:l})},d=l=>l?parseFloat(l):void 0;return e.jsxs(ee,{className:"border-2 mt-4",children:[e.jsxs(Se,{className:"pb-4",children:[e.jsx("h3",{className:"text-heading-sm font-semibold",children:"Thread / Yarn Specification"}),e.jsx("p",{className:"text-body-sm text-subtle",children:"Configure based on what's printed on your spool"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-body-sm font-medium",children:"Specification Type"}),e.jsxs(Ie,{value:c.type,onValueChange:l=>ne(l),disabled:a,children:[e.jsx(ze,{children:e.jsx(Oe,{placeholder:"Select type"})}),e.jsxs($e,{children:[e.jsx(Y,{value:"ticket",children:"Ticket / No. (e.g., 120)"}),e.jsx(Y,{value:"nm",children:"Nm (e.g., Nm 71/2)"}),e.jsx(Y,{value:"tex",children:"Tex (e.g., 30)"}),e.jsx(Y,{value:"dtex",children:"dtex (e.g., 141)"}),e.jsx(Y,{value:"denier",children:"Denier (e.g., 120)"}),e.jsx(Y,{value:"length_weight",children:"Length & Weight (e.g., 125m / 50g)"}),e.jsx(Y,{value:"diameter_mm",children:"Diameter (mm)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.type==="ticket"&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Ticket No."}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:c.ticketNo||"",onChange:l=>g({ticketNo:d(l.target.value)}),disabled:a})]}),c.type==="nm"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Nm Value"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.nm||"",onChange:l=>g({nm:d(l.target.value)}),disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Ply (optional)"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.ply||"",placeholder:"1",onChange:l=>g({ply:d(l.target.value)}),disabled:a})]})]}),c.type==="tex"&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Tex Value"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.tex||"",onChange:l=>g({tex:d(l.target.value)}),disabled:a})]}),c.type==="dtex"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"dtex Value"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.dtex||"",onChange:l=>g({dtex:d(l.target.value)}),disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Ply (optional)"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.ply||"",placeholder:"1",onChange:l=>g({ply:d(l.target.value)}),disabled:a})]})]}),c.type==="denier"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Denier Value"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.denier||"",onChange:l=>g({denier:d(l.target.value)}),disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Ply (optional)"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.ply||"",placeholder:"1",onChange:l=>g({ply:d(l.target.value)}),disabled:a})]})]}),c.type==="length_weight"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Length (m)"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.meters||"",onChange:l=>g({meters:d(l.target.value)}),disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Weight (g)"}),e.jsx("input",{type:"number",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.grams||"",onChange:l=>g({grams:d(l.target.value)}),disabled:a})]})]}),c.type==="diameter_mm"&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Diameter (mm)"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.diameterMM||"",onChange:l=>g({diameterMM:d(l.target.value)}),disabled:a})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-body-sm font-medium",children:"Material"}),e.jsxs(Ie,{value:c.material,onValueChange:l=>F(l),disabled:a,children:[e.jsx(ze,{children:e.jsx(Oe,{placeholder:"Select material"})}),e.jsxs($e,{children:[e.jsx(Y,{value:"polyester",children:"Polyester (Default)"}),e.jsx(Y,{value:"cotton",children:"Cotton"}),e.jsx(Y,{value:"nylon",children:"Nylon"}),e.jsx(Y,{value:"unknown",children:"Unknown"})]})]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-subtle",children:"Normalized Tex:"}),e.jsx("span",{className:"font-medium",children:f.toFixed(1)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-subtle",children:"Est. Diameter:"}),e.jsxs("span",{className:"font-medium",children:[se.toFixed(3)," mm"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-subtle",children:"Derived Line Weight:"}),e.jsxs("span",{className:"font-medium",children:[z," / 255"]})]}),e.jsxs("div",{className:"text-xs text-subtle mt-1",children:["Frame: ",A,"mm, Image: ",C,"px"]})]}),e.jsx(Ye,{type:"single",collapsible:!0,className:"w-full",children:e.jsxs(We,{value:"yarn-advanced",children:[e.jsx(Xe,{className:"text-sm py-2",children:"Advanced Yarn Settings"}),e.jsx(Ge,{children:e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Visual Thickness Multiplier (k)"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.k||1.1,onChange:l=>g({k:d(l.target.value)}),disabled:a}),e.jsx("p",{className:"text-xs text-subtle mt-1",children:"Adjusts effective thickness for visual density (default 1.10)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-caption text-subtle block mb-1",children:"Override Diameter (mm)"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.overrideDiameterMM||"",placeholder:"Optional",onChange:l=>g({overrideDiameterMM:d(l.target.value)}),disabled:a})]})]})})]})})]})]})};function St(){const[D,A]=i.useState(null),[C,I]=i.useState(!1),[a,c]=i.useState(null),[S,f]=i.useState(null),[se,M]=i.useState(null),[z,R]=i.useState("fine"),[g,ne]=i.useState(!1),F=i.useRef(null),d=i.useRef(void 0),l=i.useRef(void 0),L=i.useRef(void 0),[ae,k,W]=Nt({minScale:.5,maxScale:4,enablePan:!0,enableZoom:!0,resetOnDoubleClick:!0}),[ie,me]=i.useState(288),[ue,he]=i.useState(4e3),[ke,xe]=i.useState(20),[ce,r]=i.useState(500),[o,m]=i.useState(500),[w,v]=i.useState(void 0),X=[{id:"fine",name:"Fine Detail",description:"High precision with fine lines for detailed images",icon:"âœ¨",config:{numberOfPins:360,numberOfLines:4e3,lineWeight:15,imgSize:500}},{id:"bold",name:"Bold Impact",description:"Strong lines and high contrast for dramatic effect",icon:"ðŸ”¥",config:{numberOfPins:216,numberOfLines:3e3,lineWeight:35,imgSize:500}},{id:"soft",name:"Soft Portrait",description:"Gentle lines perfect for portraits and organic shapes",icon:"ðŸŒ¸",config:{numberOfPins:288,numberOfLines:2500,lineWeight:25,imgSize:500}},{id:"pro",name:"Professional",description:"Balanced settings optimized for exhibition quality",icon:"ðŸ‘‘",config:{numberOfPins:324,numberOfLines:3500,lineWeight:20,imgSize:500}}],G=[{id:"generator",label:"Generator"},{id:"gallery",label:"Gallery"},{id:"tutorial",label:"Tutorial"},{id:"faq",label:"FAQ"}],$=t=>{const n=X.find(s=>s.id===t);n&&(R(t),me(n.config.numberOfPins),he(n.config.numberOfLines),xe(n.config.lineWeight),r(n.config.imgSize))},V=t=>{const n=document.getElementById(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"}),ne(!1)},J=()=>{ne(!g)},we=()=>{window.scrollTo({top:0,behavior:"smooth"})},Pe=()=>{const t=ae.current;if(!t)return;const n=document.createElement("a");n.download=`string-art-${Date.now()}.png`,n.href=t.toDataURL("image/png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},ge=async()=>{if(!a)return;const t=new it,n=20;let s=n;const N=t.internal.pageSize.getWidth(),u=210,b=297;t.setFontSize(24),t.text("String Art Generator Report",n,s),s+=15,t.setFontSize(16),t.text("Input Parameters",n,s),s+=10,t.setFontSize(12),t.text(`Frame Diameter: ${o} mm`,n,s),s+=7,t.text(`Number of Pins: ${a.parameters.numberOfPins}`,n,s),s+=7,t.text(`Number of Lines: ${a.parameters.numberOfLines}`,n,s),s+=7,t.text(`Line Weight: ${a.parameters.lineWeight}`,n,s),s+=7,t.text(`Image Size (Processing): ${a.parameters.imgSize}px`,n,s),s+=15,t.setFontSize(16),t.text("Statistics",n,s),s+=10,t.setFontSize(12),t.text(`Total Lines Drawn: ${a.lineSequence.length}`,n,s),s+=7,t.text(`Total Thread Length: ${(a.totalThreadLength/1e3).toFixed(2)} meters`,n,s),s+=7,t.text(`Processing Time: ${(a.processingTimeMs/1e3).toFixed(2)} seconds`,n,s),s+=15,t.setFontSize(10),t.setTextColor(100),t.text("This report includes a high-resolution image, a 1:1 scale stencil/template (full & tiled), and the full pin sequence.",n,s),t.setTextColor(0);const y=a.parameters.hoopDiameter,x=y+n*2,E=4e3,_=document.createElement("canvas");_.width=E,_.height=E;const T=_.getContext("2d");T.fillStyle="white",T.fillRect(0,0,E,E),T.strokeStyle="rgba(0, 0, 0, 0.1)",T.lineWidth=1,T.lineCap="round",T.lineJoin="round";const q=E/a.parameters.imgSize,re=a.pinCoordinates;for(let j=0;j<a.lineSequence.length-1;j++){T.beginPath();const P=re[a.lineSequence[j]],h=re[a.lineSequence[j+1]];T.moveTo(P[0]*q,P[1]*q),T.lineTo(h[0]*q,h[1]*q),T.stroke()}const H=_.toDataURL("image/jpeg",.8),B=(j,P)=>{t.setFontSize(18),t.text("Preview (1:1 Scale)",n+j,n+P),t.addImage(H,"JPEG",n+j,n+10+P,y,y)},K=(j,P)=>{t.setFontSize(14),t.text("Template / Stencil (1:1 Scale)",n+j,n-5+P),t.setFontSize(10),t.text(`Diameter: ${y}mm`,n+j,n+P);const h=x/2+j,p=x/2+P,O=y/2;t.setLineWidth(.2),t.circle(h,p,O,"S"),t.setFillColor(0,0,0),t.circle(h,p,2,"F"),t.setLineWidth(.1),t.setLineDashPattern([2,2],0),t.line(h-O,p,h+O,p),t.line(h,p-O,h,p+O);const be=O,ve=be*Math.cos(Math.PI/4),je=be*Math.sin(Math.PI/4);t.line(h-ve,p-je,h+ve,p+je),t.line(h-ve,p+je,h+ve,p-je),t.setLineDashPattern([],0);const _e=.5;t.setFontSize(7);const Ke=a.parameters.numberOfPins;for(let ye=0;ye<Ke;ye++){const Re=a.pinCoordinates[ye],Ee=a.parameters.imgSize/2,Qe=Re[0]-Ee,et=Re[1]-Ee,Ne=Math.atan2(et,Qe),tt=h+Math.cos(Ne)*O,st=p+Math.sin(Ne)*O;t.setFillColor(0,0,0),t.circle(tt,st,_e,"F");const Ae=3,nt=h+Math.cos(Ne)*(O+Ae),at=p+Math.sin(Ne)*(O+Ae);t.text(ye.toString(),nt,at,{align:"center",baseline:"middle"})}};if(t.addPage([x,x],x>x?"l":"p"),B(0,0),x>200){const j=Math.ceil(x/u),P=Math.ceil(x/b);for(let h=0;h<P;h++)for(let p=0;p<j;p++)t.addPage("a4","p"),t.setFontSize(8),t.setTextColor(150),t.text(`Preview Tile: Row ${h+1}/${P}, Col ${p+1}/${j}`,5,5),t.setTextColor(0),B(-p*u,-h*b)}if(t.addPage([x,x],x>x?"l":"p"),K(0,0),x>200){const j=Math.ceil(x/u),P=Math.ceil(x/b);for(let h=0;h<P;h++)for(let p=0;p<j;p++)t.addPage("a4","p"),t.setFontSize(8),t.setTextColor(150),t.text(`Template Tile: Row ${h+1}/${P}, Col ${p+1}/${j}`,5,5),t.setTextColor(0),K(-p*u,-h*b)}t.addPage("a4","p"),s=n,t.setFontSize(18),t.text("Pin Sequence",n,s),s+=10,t.setFontSize(9);const Q=4,pe=(N-n*2)/Q,fe=Math.floor((t.internal.pageSize.getHeight()-s-n)/5);let U=0;const de=a.lineSequence,Z=de.length-1;for(;U<Z;){for(let j=0;j<Q;j++){const P=n+j*pe;for(let h=0;h<fe&&!(U>=Z);h++){const p=de[U],O=de[U+1],be=U+1;t.text(`${be}) ${p} -> ${O}`,P,s+h*5),U++}}U<Z&&(t.addPage(),s=n)}t.save(`string-art-plan-${o}mm-${Date.now()}.pdf`)},Ce=()=>{if(!a)return;const t=4e3,n=document.createElement("canvas");n.width=t,n.height=t;const s=n.getContext("2d");s.fillStyle="white",s.fillRect(0,0,t,t);const N=t/2,u=t/2,y=(t-2*100)/2;s.strokeStyle="black",s.lineWidth=2,s.beginPath(),s.arc(N,u,y,0,2*Math.PI),s.stroke(),s.fillStyle="black",s.beginPath(),s.arc(N,u,20,0,2*Math.PI),s.fill(),s.strokeStyle="black",s.lineWidth=2,s.setLineDash([20,20]),s.beginPath(),s.moveTo(N-y,u),s.lineTo(N+y,u),s.stroke(),s.beginPath(),s.moveTo(N,u-y),s.lineTo(N,u+y),s.stroke();const x=y*Math.cos(Math.PI/4),E=y*Math.sin(Math.PI/4);s.beginPath(),s.moveTo(N-x,u-E),s.lineTo(N+x,u+E),s.stroke(),s.beginPath(),s.moveTo(N-x,u+E),s.lineTo(N+x,u-E),s.stroke(),s.setLineDash([]);const _=4;s.fillStyle="black",s.textAlign="center",s.textBaseline="middle";const T=a.parameters.numberOfPins,re=Math.PI*(y*2)/T,H=Math.max(24,Math.min(80,Math.floor(re*.6)));s.font=`${H}px Arial`;const B=40;for(let Q=0;Q<T;Q++){const pe=a.pinCoordinates[Q],fe=a.parameters.imgSize/2,U=pe[0]-fe,de=pe[1]-fe,Z=Math.atan2(de,U),j=N+Math.cos(Z)*y,P=u+Math.sin(Z)*y;s.beginPath(),s.arc(j,P,_,0,2*Math.PI),s.fill();const h=N+Math.cos(Z)*(y+B),p=u+Math.sin(Z)*(y+B);s.save(),s.translate(h,p),s.rotate(Z+Math.PI/2),s.restore(),s.fillText(Q.toString(),h,p)}const K=document.createElement("a");K.download=`string-art-template-${Date.now()}.png`,K.href=n.toDataURL("image/png"),document.body.appendChild(K),K.click(),document.body.removeChild(K)},De=()=>{if(!a)return;const t=`String Art Pin Sequence
Total Pins: ${a.parameters.numberOfPins}
Total Lines: ${a.lineSequence.length}
Thread Length: ${a.totalThreadLength.toFixed(2)} inches

Pin Sequence:
${a.lineSequence.join(", ")}`,n=new Blob([t],{type:"text/plain"}),s=document.createElement("a");s.download=`string-art-sequence-${Date.now()}.txt`,s.href=URL.createObjectURL(n),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(s.href)},Fe=()=>{d.current&&(cancelAnimationFrame(d.current),d.current=void 0),l.current&&(clearTimeout(l.current),l.current=void 0),L.current&&(clearTimeout(L.current),L.current=void 0),A(null),c(null),f(null),M(null),I(!1),F.current&&(F.current.value=""),V("generator")};i.useEffect(()=>{const n=setTimeout(()=>{const s=document.getElementById("loading-overlay");s&&(s.classList.add("hide"),setTimeout(()=>{s.remove()},300))},100);return()=>clearTimeout(n)},[]),i.useEffect(()=>()=>{d.current&&cancelAnimationFrame(d.current),l.current&&clearTimeout(l.current),L.current&&clearTimeout(L.current)},[]);const[oe,Me]=i.useState(!1),Le=t=>{t.size>5*1024*1024;const n=new FileReader;n.onload=s=>{A(s.target?.result),c(null),M(null)},n.readAsDataURL(t)},qe=t=>{const n=t.target.files?.[0];n&&Le(n)},Ve=t=>{t.preventDefault(),Me(!0)},He=t=>{t.preventDefault(),Me(!1)},Be=t=>{t.preventDefault(),Me(!1);const s=Array.from(t.dataTransfer.files).find(N=>N.type.startsWith("image/"));s&&Le(s)},Ue=async()=>{if(D){d.current&&(cancelAnimationFrame(d.current),d.current=void 0),l.current&&(clearTimeout(l.current),l.current=void 0),I(!0),M(null),f(null),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{const t=document.getElementById("string-art-result");t&&t.scrollIntoView({behavior:"smooth",block:"start"}),L.current=void 0},100);try{const t=new Image;t.onload=async()=>{try{const n=await ut(t,{numberOfPins:ie,numberOfLines:ue,lineWeight:ke,minDistance:Math.max(2,Math.floor(ie/36)),imgSize:ce,hoopDiameter:o},(s,N,u)=>{f(s),N&&u&&(d.current&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{Je(N,u,ce,s.linesDrawn),d.current=void 0}))});c(n)}catch(n){console.error("Generation failed:",n);const s=n instanceof Error?n.message:"Unknown error occurred";M(s)}finally{I(!1)}},t.src=D}catch(t){const n=t instanceof Error?t.message:"Failed to process image";M(n),I(!1)}}},Ze=t=>{const n=t.currentTarget;n.style.filter="brightness(0.95)",l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{n.style.filter="brightness(1)",l.current=void 0},150)},Je=(t,n,s,N)=>{const u=ae.current;if(!u||!t||!n)return;const b=u.getContext("2d"),y=k;u.style.transform="none",u.width=600,u.height=600;const x=u.width/s;b.fillStyle="white",b.fillRect(0,0,u.width,u.height);const E=u.width/2;b.strokeStyle="#e5e7eb",b.lineWidth=1,b.beginPath(),b.arc(E,E,u.width/2-5,0,Math.PI*2),b.stroke(),b.strokeStyle="rgba(0, 0, 0, 0.15)",b.lineWidth=1,b.lineCap="round",b.lineJoin="round";const _=Math.min(N,t.length-1);for(let T=0;T<_;T++){const q=t[T],re=t[T+1],H=n[q],B=n[re];H&&B&&H[0]!==void 0&&H[1]!==void 0&&(b.beginPath(),b.moveTo(H[0]*x,H[1]*x),b.lineTo(B[0]*x,B[1]*x),b.stroke())}b.fillStyle="rgba(34, 139, 230, 0.6)",n.forEach(([T,q])=>{T!==void 0&&q!==void 0&&(b.beginPath(),b.arc(T*x,q*x,1.5,0,Math.PI*2),b.fill())}),d.current&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{u.style.transform=`translate3d(${y.translateX}px, ${y.translateY}px, 0) scale(${y.scale})`,d.current=void 0})};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(gt,{onNavigate:V,onToggleMobileMenu:J,isMobileMenuOpen:g}),e.jsx(pt,{sections:G}),e.jsxs("div",{className:"sr-only",children:[e.jsx("h2",{children:"Mathematical String Art Generator Tool"}),e.jsx("p",{children:"Our advanced string art generator uses mathematical algorithms to convert photos into string art patterns. Perfect for creating mathematical art, educational demonstrations, and DIY crafts. Features include:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Convert photo to string art using algorithmic optimization"}),e.jsx("li",{children:"Mathematical string art with precise calculations"}),e.jsx("li",{children:"Educational tool for art and mathematics intersection"}),e.jsx("li",{children:"DIY string art patterns for physical creation"}),e.jsx("li",{children:"Customizable pins, lines, and artistic presets"}),e.jsx("li",{children:"Real-time generation with progress tracking"})]}),e.jsx("h3",{children:"How String Art Algorithms Work"}),e.jsx("p",{children:"String art generation involves complex mathematical optimization to determine optimal line sequences between pins that recreate image patterns using thread connections."})]}),e.jsxs("main",{children:[e.jsx(ft,{id:"generator",children:e.jsxs("div",{className:"text-center space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-display-md sm:text-display-lg lg:text-display-xl font-extrabold tracking-tight px-4 bg-gradient-to-b from-foreground to-foreground/80 bg-clip-text text-transparent",children:"String Art Generator - Convert Photos to Mathematical String Art"}),e.jsx("p",{className:"text-body-lg sm:text-heading-sm text-muted-foreground max-w-3xl mx-auto px-4 leading-relaxed",children:"Transform your photos into beautiful mathematical string art using advanced algorithms and customizable presets. Perfect for educators, artists, and DIY enthusiasts."})]}),e.jsx("div",{className:"text-caption text-brand font-medium px-4",children:"AI-Powered â€¢ Mathematical Precision â€¢ Exhibition Quality"})]})}),e.jsx("div",{className:"w-full scroll-mt-16 py-8 md:py-12 lg:py-16",children:e.jsx("div",{className:"container-apple",children:e.jsxs("div",{className:"space-y-8 sm:space-y-10 lg:space-y-12",children:[e.jsxs(ee,{className:"card-hover border-2",children:[e.jsxs(Se,{className:"pb-6",children:[e.jsx("h2",{className:"text-heading-lg font-semibold",children:"Upload Your Image"}),e.jsx("p",{className:"text-body-sm text-subtle mt-2",children:"Choose a high-contrast photo for the best string art results. JPG, PNG, and WebP formats are supported."})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`
                    drag-zone-mobile text-center transition-all cursor-pointer
                    min-h-[220px] sm:min-h-[240px] flex flex-col items-center justify-center
                    touch-feedback-gentle focus-mobile
                    ${D?"border-primary bg-primary/5":oe?"drag-active":"border-border hover:border-primary/50 hover:bg-accent/50"}
                  `,onClick:()=>F.current?.click(),onDragOver:Ve,onDragLeave:He,onDrop:Be,role:"button",tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&F.current?.click()},children:[e.jsx("input",{ref:F,type:"file",accept:"image/*",onChange:qe,className:"hidden"}),D?e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("img",{src:D,alt:"Selected",className:"max-w-full h-auto mx-auto max-h-48 sm:max-h-64 object-contain rounded-lg shadow-sm"}),e.jsx("p",{className:"text-body-sm text-subtle",children:"Tap to change image"})]}):e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:`text-5xl sm:text-6xl transition-transform ${oe?"scale-110":""}`,children:oe?"ðŸŽ¯":"ðŸ“¸"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-heading-sm font-medium",children:oe?"Drop your image here!":"Drop your image here"}),e.jsx("p",{className:"text-body-sm text-subtle px-4",children:oe?"Release to upload your image":"or tap to browse files"})]})]})]})})})]}),e.jsx("div",{className:D?"":"opacity-50",children:e.jsxs(ee,{className:"card-hover border-2",children:[e.jsxs(Se,{className:"pb-6",children:[e.jsx("h2",{className:"text-heading-lg font-semibold",children:"Choose Style Preset"}),e.jsx("p",{className:"text-body-sm text-subtle mt-2",children:"Each preset is optimized for different image types and artistic styles. Fine-tune with advanced settings if needed."})]}),e.jsxs(te,{children:[e.jsx("div",{className:"mobile-grid-auto",children:X.map(t=>e.jsx(ee,{className:`cursor-pointer transition-all touch-feedback focus-mobile ${z===t.id?"ring-2 ring-primary bg-primary/5":"hover:shadow-md card-hover"}`,onClick:()=>$(t.id),role:"button",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&$(t.id)},children:e.jsxs(te,{className:"mobile-spacing-lg text-center min-h-[160px] sm:min-h-[180px] flex flex-col justify-center touch-target",children:[e.jsx("div",{className:"text-4xl sm:text-5xl mb-3 sm:mb-4",children:t.icon}),e.jsx("h3",{className:"text-heading-sm font-semibold mb-2",children:t.name}),e.jsx("p",{className:"text-body-sm text-subtle leading-relaxed",children:t.description})]})},t.id))}),e.jsx("div",{className:"mt-8 pt-8 border-t border-border",children:e.jsx(Ye,{type:"single",collapsible:!0,children:e.jsxs(We,{value:"advanced-settings",children:[e.jsx(Xe,{className:"hover:no-underline text-heading-sm font-medium",children:"Advanced Settings"}),e.jsx(Ge,{children:e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"mobile-stack",children:[e.jsx(Te,{label:"Number of Pins",min:36,max:360,step:36,value:ie,onValueChange:me,disabled:C,formatValue:t=>`${t} pins`,className:"w-full"}),e.jsx("div",{className:"text-body-sm text-subtle mt-2 leading-relaxed",children:"More pins create finer detail but increase processing time."}),e.jsx(Te,{label:"Number of Lines",min:100,max:4e3,step:100,value:ue,onValueChange:he,disabled:C,formatValue:t=>`${t} lines`,className:"w-full"}),e.jsx("div",{className:"text-body-sm text-subtle mt-2 leading-relaxed",children:"More lines create darker, richer results."}),e.jsx(Tt,{onChange:(t,n)=>{v(t),xe(n)},hoopDiameterMM:o,imgSizePx:ce,initialSpec:w,disabled:C}),e.jsx(Te,{label:"Canvas Size",min:200,max:600,step:50,value:ce,onValueChange:r,disabled:C,formatValue:t=>`${t}px`,className:"w-full"}),e.jsx("div",{className:"text-body-sm text-subtle mt-2 leading-relaxed",children:"Higher resolution improves quality but takes longer."}),e.jsx(Te,{label:"Frame Diameter",min:200,max:1e3,step:10,value:o,onValueChange:m,disabled:C,formatValue:t=>`${t}mm`,className:"w-full"}),e.jsx("div",{className:"text-body-sm text-subtle mt-2 leading-relaxed",children:"Physical size of the frame. Used for thread length calculation and template generation."})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-heading-sm font-medium mb-3 text-brand",children:"ðŸ’¡ Pro Tips"}),e.jsxs("ul",{className:"text-body-sm text-subtle space-y-2",children:[e.jsx("li",{children:"â€¢ Use high contrast images for better definition"}),e.jsx("li",{children:"â€¢ Portrait photos work best with 288+ pins"}),e.jsx("li",{children:"â€¢ Start with presets, then fine-tune if needed"}),e.jsx("li",{children:"â€¢ Large settings may take 30+ seconds to process"})]})]})]})})]})})})]})]})}),e.jsx(le,{onClick:Ue,disabled:!D||C,size:"lg",className:"w-full touch-target-xl text-heading-sm font-semibold min-h-[72px] sm:min-h-[80px] touch-feedback shadow-lg hover:shadow-xl focus-mobile",children:C?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin"}),"Generating..."]}):"Generate String Art"}),se&&e.jsx(ee,{className:"border-destructive bg-destructive/5 border-2",children:e.jsx(te,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-heading-sm font-medium text-destructive mb-2",children:"Generation Error"}),e.jsx("p",{className:"text-body-sm text-destructive/80",children:se})]})]})})}),(S||a)&&e.jsxs(ee,{id:"string-art-result",className:"card-hover border-2 scroll-mt-20",children:[e.jsxs(Se,{className:"pb-6",children:[e.jsx("h2",{className:"text-heading-lg font-semibold",children:"String Art Result"}),e.jsx("p",{className:"text-body-sm text-subtle mt-2",children:"Your generated string art with mathematical precision and artistic beauty."})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative w-full max-w-lg mx-auto",children:[e.jsx(ht,{onReset:Fe,children:e.jsx("canvas",{ref:ae,className:"canvas-zoomable border border-border rounded-lg w-full mx-auto block transition-transform duration-100 touch-optimized",style:{aspectRatio:"1/1",touchAction:"none"},onTouchStart:t=>{Ze(t),W.onTouchStart(t)},onTouchMove:W.onTouchMove,onTouchEnd:t=>{W.onTouchEnd(t)},onWheel:W.onWheel,onDoubleClick:W.onDoubleClick})}),e.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1 sm:hidden",children:[e.jsx("button",{onClick:()=>W.setTransform({scale:Math.min(4,k.scale*1.2)}),className:"touch-target bg-background/90 backdrop-blur-sm border border-border/50 rounded-lg shadow-lg text-xs font-medium",disabled:k.scale>=4,"aria-label":"Zoom in",children:"+"}),e.jsx("button",{onClick:()=>W.setTransform({scale:Math.max(.5,k.scale*.8)}),className:"touch-target bg-background/90 backdrop-blur-sm border border-border/50 rounded-lg shadow-lg text-xs font-medium",disabled:k.scale<=.5,"aria-label":"Zoom out",children:"-"}),e.jsx("button",{onClick:W.resetTransform,className:"touch-target bg-background/90 backdrop-blur-sm border border-border/50 rounded-lg shadow-lg text-xs font-medium","aria-label":"Reset zoom",children:"âŒ‚"})]}),k.scale===1&&k.translateX===0&&k.translateY===0&&e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-background/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs text-subtle border border-border/50 sm:hidden",children:"Pinch to zoom â€¢ Double tap to reset"})]}),S&&e.jsx(ee,{className:"glass-effect border-2",children:e.jsx(te,{className:"p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-heading-md font-semibold",children:"Generating Your String Art"}),e.jsxs("span",{className:"text-heading-sm font-medium text-brand",children:[S.percentComplete.toFixed(1),"%"]})]}),e.jsx(xt,{value:S.percentComplete,className:"w-full"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 text-body-sm text-subtle",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-caption text-emphasis",children:"LINES DRAWN"}),e.jsxs("div",{className:"font-medium",children:[S.linesDrawn," / ",S.totalLines]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-caption text-emphasis",children:"THREAD LENGTH"}),e.jsxs("div",{className:"font-medium",children:[(S.threadLength/1e3).toFixed(2),"m"]})]})]})]})})}),a&&e.jsxs("div",{className:"bg-muted/50 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-heading-sm font-medium text-emphasis mb-4",children:"Generation Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-caption text-emphasis",children:"PROCESSING TIME"}),e.jsxs("div",{className:"text-body-sm font-medium",children:[(a.processingTimeMs/1e3).toFixed(1),"s"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-caption text-emphasis",children:"TOTAL LINES"}),e.jsx("div",{className:"text-body-sm font-medium",children:a.lineSequence.length})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-caption text-emphasis",children:"THREAD LENGTH"}),e.jsxs("div",{className:"text-body-sm font-medium",children:[(a.totalThreadLength/1e3).toFixed(2),"m"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-caption text-emphasis",children:"ANCHOR PINS"}),e.jsx("div",{className:"text-body-sm font-medium",children:a.parameters.numberOfPins})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pt-6",children:[e.jsxs(le,{variant:"outline",className:"touch-target-lg text-body-sm font-medium touch-feedback focus-mobile",onClick:Pe,children:[e.jsx("span",{className:"mr-2",children:"ðŸ“¥"}),"Download PNG"]}),e.jsxs(le,{variant:"outline",className:"touch-target-lg text-body-sm font-medium touch-feedback focus-mobile",onClick:ge,children:[e.jsx("span",{className:"mr-2",children:"ðŸ“„"}),"Download PDF"]}),e.jsxs(le,{variant:"outline",className:"touch-target-lg text-body-sm font-medium touch-feedback focus-mobile",onClick:Ce,children:[e.jsx("span",{className:"mr-2",children:"ðŸŽ¯"}),"Download Template"]}),e.jsxs(le,{variant:"outline",className:"touch-target-lg text-body-sm font-medium touch-feedback focus-mobile",onClick:De,children:[e.jsx("span",{className:"mr-2",children:"ðŸ“"}),"Download TXT"]}),e.jsxs(le,{variant:"outline",className:"touch-target-lg text-body-sm font-medium touch-feedback focus-mobile",onClick:Fe,children:[e.jsx("span",{className:"mr-2",children:"ðŸ”„"}),"Create New"]})]})]})]})})]})]})})}),e.jsx("div",{className:"w-full py-8",children:e.jsx("div",{className:"container-apple",children:e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-border to-transparent"})})}),e.jsx(bt,{}),e.jsx(vt,{}),e.jsx(jt,{})]}),e.jsx(yt,{onScrollToTop:we,onShowHelp:()=>V("faq")})]})}lt.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(St,{})}));
//# sourceMappingURL=index-DRLSZf_Q.js.map
